{"version":3,"sources":["../node_modules/prettier sync","Upload.js","BranchSelector.js","LocalFetcher.js","GithubFetcher.js","CompareFile.js","CompareProject.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Upload","state","files","hovering","onDragEnter","event","preventDefault","_this","setState","onDragLeave","onDrop","props","onReceivedFiles","dataTransfer","items","backgroundColor","this","react_default","a","createElement","style","height","width","onDragOver","React","Component","BRANCHES","value","branch","path","label","BranchSelector","react_select_esm","options","onChange","collectFiles","entries","promises","_","flatMap","entry","Promise","reject","isFile","push","createReader","readEntries","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee","results","wrap","_context","prev","next","stop","_x","apply","arguments","all","folder","webkitGetAsEntry","_ref2","_callee2","_context2","_this2","_x3","map","file","f","reader","FileReader","onloadend","contents","result","fileBlob","readAsText","_default","classCallCheck","rootPath","axios","get","concat","auth","username","response","_fetchFiles","data","type","replace","abrupt","fetchFiles","_x4","_callee4","_context4","download_url","sent","_x5","CompareFile","prettier","format","parser","plugins","parsers","message","github","local","formatContents","diff","part","i","status","added","removed","key","className","renderNoMatch","fullPath","renderLocalFile","renderGithubFile","renderDiffs","Compare","localFetcher","localFile","githubFile","githubFetcher","find","gh","src_CompareFile_0","App","srcFolder","LocalFetcher","read","first","readContents","onBranchChange","_ref2$value","onSubmit","GithubFetcher","fetchFileContents","src_BranchSelector","CompareProject","renderForm","src_Upload","ReactDOM","render","src_App","document","querySelector"],"mappings":"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","file":"static/js/main.fa87f75d.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 74;","import React from 'react';\n\nclass Upload extends React.Component {\n  state = { files: null, hovering: false };\n\n  onDragEnter = event => {\n    event.preventDefault();\n    this.setState({ hovering: true });\n  };\n\n  onDragLeave = () => {\n    this.setState({ hovering: false });\n  };\n\n  onDrop = event => {\n    event.preventDefault();\n\n    // event.dataTransfer.items[0]\n    //   .webkitGetAsEntry()\n    //   .createReader()\n    //   .readEntries(b => console.log(b));\n    this.props.onReceivedFiles(event.dataTransfer.items);\n  };\n\n  render() {\n    const backgroundColor = this.state.hovering ? 'aliceblue' : 'grey';\n    return (\n      <div\n        style={{ height: '100vh', width: '100%', backgroundColor }}\n        onDragOver={e => e.preventDefault()}\n        onDragEnter={this.onDragEnter}\n        onDragLeave={this.onDragLeave}\n        onDrop={this.onDrop}\n      >\n        Drop files on me\n      </div>\n    );\n  }\n}\n\nexport default Upload;\n","import React from 'react';\nimport Select from 'react-select';\n\nconst BRANCHES = [\n  {\n    value: { branch: '213-forms', path: 'streams/client/src' },\n    label: 'Forms with Redux Form'\n  }\n];\n\nclass BranchSelector extends React.Component {\n  render() {\n    return <Select options={BRANCHES} onChange={this.props.onChange} />;\n  }\n}\n\nexport default BranchSelector;\n","import _ from 'lodash';\n\nexport default class {\n  files = [];\n\n  async read(folder) {\n    return new Promise((resolve, reject) => {\n      folder\n        .webkitGetAsEntry()\n        .createReader()\n        .readEntries(async entries => {\n          await this.collectFiles(entries);\n          resolve();\n        }, reject);\n    });\n  }\n\n  collectFiles = entries => {\n    const promises = _.flatMap(entries, entry => {\n      return new Promise((resolve, reject) => {\n        if (entry.isFile) {\n          this.files.push(entry);\n          return resolve();\n        }\n\n        const reader = entry.createReader();\n        reader.readEntries(async results => {\n          await this.collectFiles(results);\n          resolve();\n        });\n      });\n    });\n\n    return Promise.all(promises);\n  };\n\n  readContents() {\n    const promises = this.files.map(file => {\n      return (f => {\n        return new Promise((resolve, reject) => {\n          const reader = new FileReader();\n\n          reader.onloadend = () => {\n            f.contents = reader.result;\n            resolve();\n          };\n\n          f.file(fileBlob => {\n            reader.readAsText(fileBlob);\n          });\n        });\n      })(file);\n    });\n\n    return Promise.all(promises);\n  }\n}\n","import _ from 'lodash';\nimport axios from 'axios';\n\n// Don't care that secret is exposed, these are used to circumvent\n// OAuth's API rate limiting and have no permissions assocated with them\nconst clientId = 'ad86d59410536a7ebf24';\nconst clientSecret = '5a582a7121af9826d8a5f10ffa9a028ff308efcb';\n\nexport default class {\n  constructor(path, branch) {\n    this.rootPath = path;\n    this.branch = branch;\n  }\n  files = [];\n\n  async fetchFiles(path = this.rootPath) {\n    const response = await axios.get(\n      `https://api.github.com/repos/stephengrider/reduxcode/contents/${path}?ref=${\n        this.branch\n      }&client_id=${clientId}&client_secret=${clientSecret}`,\n      {\n        auth: { username: 'stephengrider' }\n      }\n    );\n\n    return await this._fetchFiles(response.data, path);\n  }\n\n  async _fetchFiles(entries, path) {\n    const promises = _.flatMap(entries, entry => {\n      return new Promise(async (resolve, reject) => {\n        if (entry.type === 'file') {\n          entry.path = entry.path.replace(this.rootPath, '');\n          this.files.push(entry);\n          resolve();\n          return;\n        }\n\n        await this.fetchFiles(entry.path);\n        resolve();\n      });\n    });\n\n    return Promise.all(promises);\n  }\n\n  fetchFileContents() {\n    const promises = this.files.map(async file => {\n      const response = await axios.get(file.download_url);\n\n      file.contents = response.data;\n    });\n\n    return Promise.all(promises);\n  }\n}\n","import './CompareFile.css';\nimport _ from 'lodash';\nimport React from 'react';\nimport prettier from 'prettier/standalone';\nimport parsers from 'prettier/parser-babylon';\nimport * as diff from 'diff';\n\nclass CompareFile extends React.Component {\n  formatContents(contents) {\n    try {\n      return prettier.format(contents, {\n        parser: 'babylon',\n        plugins: [parsers]\n      });\n    } catch (e) {\n      return e.message;\n    }\n  }\n\n  renderDiffs() {\n    if (!this.props.github) {\n      return null;\n    }\n    const local = this.formatContents(this.props.local.contents);\n    const github = this.formatContents(this.props.github.contents);\n\n    return diff.diffLines(github, local).map((part, i) => {\n      const status = part.added ? 'added' : part.removed ? 'removed' : 'same';\n\n      return (\n        <span key={i} className={status}>\n          {part.value}\n        </span>\n      );\n    });\n  }\n\n  renderLocalFile(file) {\n    return this.formatContents(file.contents);\n  }\n\n  renderGithubFile(file) {\n    if (!file) {\n      return this.renderNoMatch();\n    }\n\n    return this.formatContents(file.contents);\n  }\n\n  renderNoMatch() {\n    return <div>No matching file found.</div>;\n  }\n\n  render() {\n    return (\n      <div className=\"compare-file\">\n        <h3>{this.props.local.fullPath}</h3>\n        <div className=\"code\">\n          <pre>{this.renderLocalFile(this.props.local)}</pre>\n          <pre>{this.renderGithubFile(this.props.github)}</pre>\n          <pre>{this.renderDiffs()}</pre>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CompareFile;\n","import React from 'react';\nimport CompareFile from './CompareFile';\n\nclass Compare extends React.Component {\n  render() {\n    return this.props.localFetcher.files.map(localFile => {\n      const githubFile = this.props.githubFetcher.files.find(gh => {\n        return localFile.fullPath.replace('/src', '') === gh.path;\n      });\n\n      return (\n        <CompareFile\n          key={localFile.fullPath}\n          local={localFile}\n          github={githubFile}\n        />\n      );\n    });\n  }\n}\n\nexport default Compare;\n","import _ from 'lodash';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Upload from './Upload';\nimport BranchSelector from './BranchSelector';\nimport LocalFetcher from './LocalFetcher';\nimport GithubFetcher from './GithubFetcher';\nimport CompareProject from './CompareProject';\n\nclass App extends React.Component {\n  state = { localFetcher: null, branch: null };\n\n  onReceivedFiles = async srcFolder => {\n    const localFetcher = new LocalFetcher();\n\n    await localFetcher.read(_.first(srcFolder));\n    await localFetcher.readContents();\n\n    this.setState({ localFetcher });\n  };\n\n  onBranchChange = ({ value: { path, branch } }) => {\n    this.setState({ branch, path });\n  };\n\n  onSubmit = async event => {\n    event.preventDefault();\n\n    const githubFetcher = new GithubFetcher(this.state.path, this.state.branch);\n\n    await githubFetcher.fetchFiles();\n    await githubFetcher.fetchFileContents();\n\n    this.setState({ githubFetcher });\n  };\n\n  renderForm() {\n    return (\n      <form onSubmit={this.onSubmit}>\n        <div>Select the section you want to compare against</div>\n        <BranchSelector onChange={this.onBranchChange} />\n        <button>Compare!</button>\n      </form>\n    );\n  }\n\n  render() {\n    if (!this.state.localFetcher) {\n      return <Upload onReceivedFiles={this.onReceivedFiles} />;\n    } else if (!this.state.githubFetcher) {\n      return this.renderForm();\n    } else {\n      return (\n        <CompareProject\n          githubFetcher={this.state.githubFetcher}\n          localFetcher={this.state.localFetcher}\n        />\n      );\n    }\n  }\n}\n\nReactDOM.render(<App />, document.querySelector('#root'));\n"],"sourceRoot":""}